## 프로세스와 스레드의 차이

**프로세스**는 운영체제로부터 자원을 할당받는 작업의 단위

**스레드**는 할당받은 자원을 이용하는 실행의 단위이고, 프로세스 내에 여러 개 생길 수 있다.

## 멀티스레드

- 싱글 스레드 / 멀티 스레드 차이
    - 싱글 스레드: 하나의 프로세스에서 하나의 스레드만 사용하는 것
    - 멀티 스레드: 프로그램을 다수의 실행 단위로 나누어 실행하는 것
- 장점과 단점
- 멀티프로세스 vs 멀티스레드
    - 멀티프로세스는 하나의 프로그램을 여러 개의 프로세스로 구성하여 각 프로세스가 하나의 작업을 처리하는 것이다.
        - 장점: 동기화. 느리지만 안정성이 높음. 하나의 프로세스가 잘못되어도 프로그램은 동작함
        - 단점: context switch 비용 발생
    - 멀티스레드는 프로그램을 여러 개의 스레드로 구성하고 각 스레드가 작업을 처리하는 것. 프로세스간 자원 공유 context switch 발생하지 않음
        - 장점: 시스템 자원 소모 감소, 처리 비용 감소(실행 속도 향상), 스레드 간 자원 공유
        - 단점: 디버깅 어려움, 동기화 이슈 발생, 하나의 스레드의 오류로 전체 프로세스에 문제 발생
- Context Switching이란?
    - CPU에서 여러 프로세스를 돌아가면서 작업을 처리하는 과정. 동작 중인 프로세스가 대기하면서 해당 프로세스의 상태(Context)를 보관하고 대기하고 있다가 다시 실행 시 복구하는 비용(시간)을 말한다.

## 동기/비동기

- 동기, 비동기
    - **메인 쓰레드 에서 대기열을 어떤 방식으로 처리할지** 정하는 것
    - 동기 방식 (Synchronous)
        
        다른 쓰레드로 작업을 보내고, 그 작업이 끝날 때까지 기다린다. 작업이 끝나야 다른 작업을 시작할 수 있다.
        요청을 보낸 후 응답(결과)을 받아야지만 다음 동작이 이루어지는 방식이다.
        어떠한 일을 처리할 동안 다른 프로그램은 정지한다.
        실제 CPU가 느려지는 것은 아니지만 시스템의 전체적인 효율이 저하된다고 할 수 있다.
        추구하는 같은 행위(목적)가 동시에 이루어짐
        예) 계좌 송금 - 받았다는 걸 인지해야 전송함
        
    - 비동기 방식 (Asynchronous)
        
        다른 쓰레드로 작업을 보내고, 그 작업이 끝나는 것을 기다리지 않고 다른 작업을 시작한다.
        요청을 보낸 후 응답(결과)과는 상관없이 다음 동작이 이루어지는 방식이다.
        결과가 주어지는 데 시간이 걸리더라도 그 시간 동안 다른 작업을 할 수 있으므로 자원을 효율적으로 사용할 수 있다.
        비동기식은 비동기식 처리를 요청할 때 할 일이 끝난 후 처리 결과를 알려주는 콜백이라는 함수를 함께 알려준다.
        추구하는 행위가 다를 수도 있고, 동시에 이루어지지도 않음.
        예) 시험지 학생(문제)->선생님(채점)->학생(확인)
        

- 직렬, 동시
    - **어떤 대기열을 사용할 지** 정하는 것
    - 직렬(Serial)
        
        분산처리 시킨 작업을 오직 한 개의 쓰레드에서만 처리하는 것. 
        즉, A 쓰레드에서 4개의 작업을 분산처리 시켰는데, B 쓰레드에서만 처리하는 것이다.
        → ‘순서’가 중요할 때 사용한다.
        
    - 동시(Concurrent)
        
        몇 개의 쓰레드로 분산할지는 시스템이 정하지만, 시스템이 정한 여러개의 쓰레드로 분산 처리하는 것. 
        작업들이 각자 독립적이지만 유사한 작업들일 때 굉장히 유용하다.
        

### GCD

  - DispatchQueue
      - Serial Dispatch Queue
      - Concurrent Dispatch Queue
  - 앱 실행 시 시스템에서 2개의 Queue를 만들어 줌
      - Main Queue

          메인 스레드(UI 스레드)에서 사용되는 Serial Queue.
          모든 UI 처리는 메인 스레드에서 처리해야 함.

      - Global Queue

          편의상 사용할 수 있게 만들어 놓은 Concorrent Queue.
          처리 우선 순위를 위한 QoS(Quality of Service) 파라미터를 제공함. 
          병렬적으로 동시에 처리하기 때문에 작업 완료의 순서는 정할 수 없지만 우선적으로 일을 처리하게 할 수 있음.

          - QoS 우선순위

              1. userInteractive
              2. userInitiated
              3. default
              4. utility
              5. background
              6. unspecified
                

https://www.raywenderlich.com/5370-grand-central-dispatch-tutorial-for-swift-4-part-1-2
